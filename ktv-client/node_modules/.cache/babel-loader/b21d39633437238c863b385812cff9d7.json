{"remainingRequest":"D:\\研课程\\ktv-select_music-system-master\\ktv-select_music-system-master\\ktv-client\\node_modules\\babel-loader\\lib\\index.js!D:\\研课程\\ktv-select_music-system-master\\ktv-select_music-system-master\\ktv-client\\src\\config\\isBadAccount.js","dependencies":[{"path":"D:\\研课程\\ktv-select_music-system-master\\ktv-select_music-system-master\\ktv-client\\src\\config\\isBadAccount.js","mtime":1585972675000},{"path":"D:\\研课程\\ktv-select_music-system-master\\ktv-select_music-system-master\\ktv-client\\node_modules\\cache-loader\\dist\\cjs.js","mtime":499162500000},{"path":"D:\\研课程\\ktv-select_music-system-master\\ktv-select_music-system-master\\ktv-client\\node_modules\\babel-loader\\lib\\index.js","mtime":499162500000}],"contextDependencies":[],"result":["/** \n*\n*  @author: Mr_Wei \n*  @version: 1.0.0 \n*  @description: 如果登录,检测是否过期\n*  @Date: 2019/1019 10:09\n*\n*/\nimport jwt_decode from \"jwt-decode\";\nimport { Message } from \"view-design\";\nimport router from '@/router';\n\nfunction BadAccount() {\n  var decode = jwt_decode(localStorage.userToken);\n  var endTime = decode.endTime;\n  var badTime = new Date(endTime).getTime(); // setInterval(() => {\n\n  if (new Date().getTime() > badTime) {\n    // 到时间时,强制下机\n    Message.error({\n      content: \"账号过期\",\n      duration: 3\n    });\n    localStorage.removeItem(\"userToken\");\n    router.go(0);\n  }\n\n  if (new Date().getTime() - badTime == 5 * 60 * 1000) {\n    // 5分钟提醒\n    Message.warning({\n      content: \"你的余额不足,还剩5分钟\",\n      duration: 10\n    });\n  } // }, 900)\n\n}\n\nexport default BadAccount;",{"version":3,"sources":["D:/研课程/ktv-select_music-system-master/ktv-select_music-system-master/ktv-client/src/config/isBadAccount.js"],"names":["jwt_decode","Message","router","BadAccount","decode","localStorage","userToken","endTime","badTime","Date","getTime","error","content","duration","removeItem","go","warning"],"mappings":"AAAA;;;;;;;;AAQA,OAAOA,UAAP,MAAuB,YAAvB;AACA,SAASC,OAAT,QAAwB,aAAxB;AACA,OAAOC,MAAP,MAAmB,UAAnB;;AACA,SAASC,UAAT,GAAqB;AACjB,MAAMC,MAAM,GAAGJ,UAAU,CAACK,YAAY,CAACC,SAAd,CAAzB;AADiB,MAEVC,OAFU,GAECH,MAFD,CAEVG,OAFU;AAGjB,MAAMC,OAAO,GAAG,IAAIC,IAAJ,CAASF,OAAT,EAAkBG,OAAlB,EAAhB,CAHiB,CAIjB;;AACI,MAAG,IAAID,IAAJ,GAAWC,OAAX,KAAuBF,OAA1B,EAAkC;AAAE;AAChCP,IAAAA,OAAO,CAACU,KAAR,CAAc;AACVC,MAAAA,OAAO,EAAC,MADE;AAEVC,MAAAA,QAAQ,EAAC;AAFC,KAAd;AAIAR,IAAAA,YAAY,CAACS,UAAb,CAAwB,WAAxB;AACAZ,IAAAA,MAAM,CAACa,EAAP,CAAU,CAAV;AACH;;AACD,MAAG,IAAIN,IAAJ,GAAWC,OAAX,KAAuBF,OAAvB,IAAkC,IAAI,EAAJ,GAAS,IAA9C,EAAmD;AAAG;AAClDP,IAAAA,OAAO,CAACe,OAAR,CAAgB;AACZJ,MAAAA,OAAO,EAAC,cADI;AAEZC,MAAAA,QAAQ,EAAC;AAFG,KAAhB;AAIH,GAlBY,CAmBjB;;AACH;;AAED,eAAeV,UAAf","sourcesContent":["/** \n*\n*  @author: Mr_Wei \n*  @version: 1.0.0 \n*  @description: 如果登录,检测是否过期\n*  @Date: 2019/1019 10:09\n*\n*/ \nimport jwt_decode from \"jwt-decode\"\nimport { Message } from \"view-design\";\nimport router from '@/router'\nfunction BadAccount(){\n    const decode = jwt_decode(localStorage.userToken);\n    const {endTime} = decode;\n    const badTime = new Date(endTime).getTime();\n    // setInterval(() => {\n        if(new Date().getTime() > badTime){ // 到时间时,强制下机\n            Message.error({\n                content:\"账号过期\",\n                duration:3\n            });\n            localStorage.removeItem(\"userToken\");\n            router.go(0);\n        }\n        if(new Date().getTime() - badTime == 5 * 60 * 1000){  // 5分钟提醒\n            Message.warning({\n                content:\"你的余额不足,还剩5分钟\",\n                duration:10\n            })\n        }\n    // }, 900)\n}\n\nexport default BadAccount"]}]}