{"remainingRequest":"D:\\研课程\\ktv-select_music-system-master\\ktv-select_music-system-master\\ktv-client\\node_modules\\babel-loader\\lib\\index.js!D:\\研课程\\ktv-select_music-system-master\\ktv-select_music-system-master\\ktv-client\\node_modules\\cache-loader\\dist\\cjs.js??ref--0-0!D:\\研课程\\ktv-select_music-system-master\\ktv-select_music-system-master\\ktv-client\\node_modules\\vue-loader\\lib\\index.js??vue-loader-options!D:\\研课程\\ktv-select_music-system-master\\ktv-select_music-system-master\\ktv-client\\src\\components\\bottomNav.vue?vue&type=script&lang=js&","dependencies":[{"path":"D:\\研课程\\ktv-select_music-system-master\\ktv-select_music-system-master\\ktv-client\\src\\components\\bottomNav.vue","mtime":1585972675000},{"path":"D:\\研课程\\ktv-select_music-system-master\\ktv-select_music-system-master\\ktv-client\\node_modules\\cache-loader\\dist\\cjs.js","mtime":499162500000},{"path":"D:\\研课程\\ktv-select_music-system-master\\ktv-select_music-system-master\\ktv-client\\node_modules\\babel-loader\\lib\\index.js","mtime":499162500000},{"path":"D:\\研课程\\ktv-select_music-system-master\\ktv-select_music-system-master\\ktv-client\\node_modules\\cache-loader\\dist\\cjs.js","mtime":499162500000},{"path":"D:\\研课程\\ktv-select_music-system-master\\ktv-select_music-system-master\\ktv-client\\node_modules\\vue-loader\\lib\\index.js","mtime":499162500000}],"contextDependencies":[],"result":["import \"core-js/modules/es6.regexp.split\";\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\nimport nextSong from \"@/config/nextSong\";\nimport prevSong from \"@/config/prevSong\";\nimport hasLogin from '@/config/isLogin';\nimport jwt_decode from \"jwt-decode\";\nimport wsmLoading from \"@/plugins/wsmLoading\";\nexport default {\n  name: \"bottomNav\",\n  data: function data() {\n    return {\n      loginModal: false,\n      ruleForm: {\n        account: \"\",\n        password: \"\"\n      },\n      rules: {\n        account: [{\n          required: true,\n          message: \"账号不能为空\",\n          trigger: \"change\"\n        }],\n        password: [{\n          required: true,\n          message: \"密码不能为空\",\n          trigger: \"change\"\n        }]\n      }\n    };\n  },\n  mounted: function mounted() {\n    var _this = this;\n\n    setTimeout(function () {\n      _this.currentSong = JSON.parse(localStorage.currentSong)[0] ? JSON.parse(localStorage.currentSong)[0] : {\n        _id: 0\n      };\n\n      if (localStorage.play == \"0\") {\n        _this.$refs.musicPlayer.pause();\n\n        $(\"#ios-play\").fadeIn();\n        $(\"#ios-pause\").fadeOut();\n      } else {\n        $(\"#ios-play\").fadeOut();\n        $(\"#ios-pause\").fadeIn();\n\n        _this.$refs.musicPlayer.play();\n      }\n    }, 200);\n  },\n  created: function created() {// this.currentSong = JSON.parse(localStorage.currentSong)[0] ? JSON.parse(localStorage.currentSong)[0] : {_id:0};\n  },\n  methods: {\n    end: function end() {\n      if (localStorage.playModle == 1) {\n        var song = nextSong();\n        this.$refs.musicPlayer.src = \"http://localhost:8633/api/music/nowmusic?id=\" + song._id;\n        var obj = [song];\n        localStorage.setItem(\"currentSong\", JSON.stringify(obj));\n        this.currentSong = song;\n      } else {\n        this.$refs.musicPlayer.play();\n      }\n    },\n    // 播放上一首\n    playPrev: function playPrev() {\n      var _this2 = this;\n\n      if (hasLogin()) {\n        if (localStorage.play == \"0\") {\n          if (this.$refs.musicPlayer.src.split(\"?\")[1] == \"id=0\") {\n            this.$confirm(\"请先添加歌曲\", \"提示\", {\n              confirmButtonText: \"确定\",\n              cancelButtonText: \"取消\",\n              type: \"warning\"\n            }).then(function () {}).catch(function () {});\n          } else {\n            var song = prevSong();\n            this.$refs.musicPlayer.src = \"http://localhost:8633/api/music/nowmusic?id=\" + song._id;\n            var obj = [song];\n            localStorage.setItem(\"currentSong\", JSON.stringify(obj));\n            this.currentSong = song;\n            setTimeout(function () {\n              $(\"#ios-play\").fadeIn();\n              $(\"#ios-pause\").fadeOut();\n\n              _this2.$refs.musicPlayer.pause();\n            }, 10);\n          }\n        } else {\n          if (this.$refs.musicPlayer.src.split(\"?\")[1] == \"id=0\") {\n            this.$confirm(\"请先添加歌曲\", \"提示\", {\n              confirmButtonText: \"确定\",\n              cancelButtonText: \"取消\",\n              type: \"warning\"\n            }).then(function () {}).catch(function () {});\n          } else {\n            var _song = prevSong();\n\n            this.$refs.musicPlayer.src = \"http://localhost:8633/api/music/nowmusic?id=\" + _song._id;\n            var _obj = [_song];\n            localStorage.setItem(\"currentSong\", JSON.stringify(_obj));\n            this.currentSong = _song;\n            setTimeout(function () {\n              $(\"#ios-play\").fadeOut();\n              $(\"#ios-pause\").fadeIn();\n\n              _this2.$refs.musicPlayer.play();\n            }, 10);\n          }\n        }\n      } else {\n        this.loginModal = true;\n      }\n    },\n    // 播放或暂停\n    playOrpause: function playOrpause() {\n      if (hasLogin()) {\n        if (this.$refs.musicPlayer.src.split(\"?\")[1] == \"id=0\") {\n          this.$confirm(\"请先添加歌曲\", \"提示\", {\n            confirmButtonText: \"确定\",\n            cancelButtonText: \"取消\",\n            type: \"warning\"\n          }).then(function () {}).catch(function () {});\n        } else if (this.$store.getters.songList.length == 1) {\n          console.log(111);\n          var song = nextSong();\n          this.$refs.musicPlayer.src = \"http://localhost:8633/api/music/nowmusic?id=\" + song._id;\n          var obj = [song];\n          localStorage.setItem(\"currentSong\", JSON.stringify(obj));\n          this.currentSong = song;\n\n          if (localStorage.play == \"0\") {\n            this.$refs.musicPlayer.play();\n            $(\"#ios-play\").fadeOut();\n            $(\"#ios-pause\").fadeIn();\n            localStorage.play = 1;\n          } else {\n            this.$refs.musicPlayer.pause();\n            $(\"#ios-play\").fadeIn();\n            $(\"#ios-pause\").fadeOut();\n            localStorage.play = 0;\n          }\n        } else {\n          if (this.$refs.musicPlayer.paused) {\n            this.$refs.musicPlayer.play();\n            $(\"#ios-play\").fadeOut();\n            $(\"#ios-pause\").fadeIn();\n            localStorage.play = 1;\n          } else {\n            this.$refs.musicPlayer.pause();\n            $(\"#ios-play\").fadeIn();\n            $(\"#ios-pause\").fadeOut();\n            localStorage.play = 0;\n          }\n        }\n      } else {\n        this.loginModal = true;\n      }\n    },\n    // 播放下一首\n    playNext: function playNext() {\n      var _this3 = this;\n\n      if (hasLogin()) {\n        if (localStorage.play == '0') {\n          console.log(11);\n\n          if (this.$refs.musicPlayer.src.split(\"?\")[1] == \"id=0\") {\n            this.$confirm(\"请先添加歌曲\", \"提示\", {\n              confirmButtonText: \"确定\",\n              cancelButtonText: \"取消\",\n              type: \"warning\"\n            }).then(function () {}).catch(function () {});\n          } else {\n            var song = nextSong();\n            this.$refs.musicPlayer.src = \"http://localhost:8633/api/music/nowmusic?id=\" + song._id;\n            var obj = [song];\n            localStorage.setItem(\"currentSong\", JSON.stringify(obj));\n            this.currentSong = song;\n            setTimeout(function () {\n              $(\"#ios-play\").fadeIn();\n              $(\"#ios-pause\").fadeOut();\n\n              _this3.$refs.musicPlayer.pause();\n            }, 10);\n          }\n        } else {\n          if (this.$refs.musicPlayer.src.split(\"?\")[1] == \"id=0\") {\n            this.$confirm(\"请先添加歌曲\", \"提示\", {\n              confirmButtonText: \"确定\",\n              cancelButtonText: \"取消\",\n              type: \"warning\"\n            }).then(function () {}).catch(function () {});\n          } else {\n            var _song2 = nextSong();\n\n            this.$refs.musicPlayer.src = \"http://localhost:8633/api/music/nowmusic?id=\" + _song2._id;\n            var _obj2 = [_song2];\n            localStorage.setItem(\"currentSong\", JSON.stringify(_obj2));\n            this.currentSong = _song2;\n            setTimeout(function () {\n              $(\"#ios-play\").fadeOut();\n              $(\"#ios-pause\").fadeIn();\n\n              _this3.$refs.musicPlayer.play();\n            }, 10);\n          }\n        }\n      } else {\n        this.loginModal = true;\n      }\n    },\n    // 顺序播放\n    orderCycle: function orderCycle() {\n      if (hasLogin()) {\n        $(\".order-cycle\").css(\"color\", \"rgb(196, 196, 26)\");\n        $(\".single-cycle\").css(\"color\", \"rgb(219, 217, 217)\");\n        this.$store.setPlayModle = 1;\n        nextSong();\n        localStorage.setItem(\"playModle\", 1);\n      } else {\n        this.loginModal = true;\n      }\n    },\n    // 单曲循环\n    singleCycle: function singleCycle() {\n      if (hasLogin()) {\n        $(\".single-cycle\").css(\"color\", \"rgb(196, 196, 26)\");\n        $(\".order-cycle\").css(\"color\", \"rgb(219, 217, 217)\");\n        this.$store.setPlayModle = -1;\n        nextSong();\n        localStorage.setItem(\"playModle\", -1);\n      } else {\n        this.loginModal = true;\n      }\n    },\n    // 静音或最大\n    minOrmax: function minOrmax() {\n      if (hasLogin()) {\n        if (this.$refs.musicPlayer.volume == 0) {\n          this.$refs.musicPlayer.volume = 1;\n          $(\".minormax\").css(\"color\", \"rgb(219, 217, 217)\");\n        } else {\n          this.$refs.musicPlayer.volume = 0;\n          $(\".minormax\").css(\"color\", \"rgb(196, 196, 26)\");\n        }\n      } else {\n        this.loginModal = true;\n      }\n    },\n    // 减小音量\n    reducevolume: function reducevolume() {\n      if (hasLogin()) {\n        $(\".minormax\").css(\"color\", \"rgb(219, 217, 217)\");\n\n        if (this.$refs.musicPlayer.volume > 0.05) {\n          this.$refs.musicPlayer.volume -= 0.05;\n        } else {\n          this.$refs.musicPlayer.volume = 0;\n        }\n      } else {\n        this.loginModal = true;\n      }\n    },\n    // 增加音量\n    addvolume: function addvolume() {\n      if (hasLogin()) {\n        $(\".minormax\").css(\"color\", \"rgb(219, 217, 217)\");\n\n        if (this.$refs.musicPlayer.volume < 0.95) {\n          this.$refs.musicPlayer.volume += 0.05;\n        } else {\n          this.$refs.musicPlayer.volume = 1;\n        }\n      } else {\n        this.loginModal = true;\n      }\n    },\n    // 回首页\n    goHome: function goHome() {\n      this.$route.path == \"/home/index\" ? console.log(\"不能前进了\") : this.$router.push(\"/\");\n    },\n    // 去已选界面\n    selected: function selected() {\n      if (hasLogin()) {\n        this.$router.push(\"/home/selected\");\n      } else {\n        this.loginModal = true;\n      }\n    },\n    // 登录\n    submit: function submit(formName) {\n      var _this4 = this;\n\n      this.$refs[formName].validate(function (valid) {\n        if (valid) {\n          wsmLoading.start();\n          _this4.loginModal = false;\n          setTimeout(function () {\n            _this4.$axios.post(\"http://localhost:8633/api/user/login\", _this4.ruleForm).then(function (res) {\n              _this4.$nextTick(function () {\n                console.log(res);\n\n                _this4.$Message.success(res.data.result);\n\n                localStorage.setItem(\"userToken\", res.data.token);\n                var decoded = jwt_decode(res.data.token);\n\n                _this4.$store.dispatch(\"setAuthorizated\", true);\n\n                _this4.$store.dispatch(\"setUser\", decoded);\n\n                wsmLoading.end();\n                _this4.ruleForm.account = \"\";\n                _this4.ruleForm.password = \"\";\n              });\n            }).catch(function (err) {\n              _this4.loginModal = true;\n              console.error(err.response);\n            });\n          }, 300);\n        } else {\n          console.log(111);\n        }\n      });\n    },\n    // 下机\n    logout: function logout() {\n      var _this5 = this;\n\n      this.$confirm(\"你确定要提前下机吗\", \"提示\", {\n        confirmButtonText: \"确定\",\n        cancleButtonText: \"取消\",\n        type: \"warning\"\n      }).then(function () {\n        wsmLoading.start(\"正在处理...\");\n        setTimeout(function () {\n          _this5.$nextTick(function () {\n            _this5.$store.dispatch(\"clearState\");\n\n            _this5.$store.dispatch(\"setCurrentSong\", {\n              id: 0\n            });\n\n            _this5.$store.dispatch(\"songList\", []);\n\n            _this5.$store.dispatch(\"playModle\", 1);\n\n            _this5.$route.path == \"/home/index\" ? null : _this5.$router.push(\"/home/index\");\n\n            _this5.$router.go(0);\n\n            wsmLoading.end();\n          });\n        }, 1000);\n      }).catch(function () {});\n    }\n  },\n  computed: {\n    isLogin: function isLogin() {\n      return this.$store.getters.isAuthorizated;\n    },\n    currentPoster: function currentPoster() {\n      if (this.$store.getters.currentSong.poster) {\n        return \"http://localhost:8633/api/music/poster?img=\" + this.$store.getters.currentSong.poster;\n      } else {\n        return require(\"../assets/image/default-song-bg.jpg\");\n      }\n    },\n    currentSong: {\n      get: function get() {\n        if (this.$store.getters.songList.length == 1) {\n          console.log(\"一首歌\");\n\n          if (localStorage.play == \"0\") {\n            $(\"#ios-play\").fadeIn();\n            $(\"#ios-pause\").fadeOut();\n          } else {\n            $(\"#ios-play\").fadeOut();\n            $(\"#ios-pause\").fadeIn();\n          }\n        } else {\n          if (localStorage.play == \"0\") {\n            setTimeout(function () {\n              document.getElementById(\"musicPlayer\").pause();\n            }, 10);\n            $(\"#ios-play\").fadeIn();\n            $(\"#ios-pause\").fadeOut();\n          } else {\n            setTimeout(function () {\n              document.getElementById(\"musicPlayer\").play();\n            }, 10);\n            $(\"#ios-play\").fadeOut();\n            $(\"#ios-pause\").fadeIn();\n          }\n        }\n\n        this.nextSong = nextSong();\n        return this.$store.getters.currentSong;\n      },\n      set: function set(val) {\n        this.$store.dispatch(\"setCurrentSong\", val);\n      }\n    }\n  }\n};",{"version":3,"sources":["bottomNav.vue"],"names":[],"mappings":"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","sourcesContent":["<template>\n    <div class=\"topNav\">\n        <div class=\"container\"></div>\n        <div class=\"inner-box\">\n            <div class=\"left\">\n                <div class=\"home\" @click=\"goHome\">\n                    <Icon type=\"ios-home\" />\n                    <div>首页</div>\n                </div>\n                <div class=\"selected\" @click=\"selected\">\n                    <Icon type=\"ios-musical-notes\" />\n                    <div>已选</div>\n                </div>\n                <div class=\"addvolume\" @click=\"addvolume\">\n                    <Icon type=\"ios-volume-up\" />\n                    <div>音量+</div>\n                </div>\n                <div class=\"reducevolume\" @click=\"reducevolume\">\n                    <Icon type=\"ios-volume-mute\" />\n                    <div>音量-</div>\n                </div>\n            </div>\n            <div class=\"middle\">\n                <img :src=\"currentPoster\" alt=\"\">\n                <div class=\"control-btn\">\n                    <div class=\"prev-btn\" @click=\"playPrev\">\n                        <Icon type=\"ios-rewind\" />\n                    </div>\n                    <div class=\"play\" @click=\"playOrpause\">\n                        <Icon type=\"ios-play\" id=\"ios-play\" />\n                        <Icon type=\"ios-pause\" id=\"ios-pause\" />\n                    </div>\n                    <div class=\"next-btn\" @click=\"playNext\">\n                        <Icon type=\"ios-fastforward\" />\n                    </div>\n                </div>\n            </div>\n            <div class=\"right\">\n                <div class=\"minormax\" @click=\"minOrmax\">\n                    <Icon type=\"md-volume-off\" />\n                    <div>静音</div>\n                </div>\n                <div class=\"single-cycle\" @click=\"singleCycle\">\n                    <Icon type=\"md-sync\" />\n                    <div>单曲</div>\n                </div>\n                <div class=\"order-cycle\" @click=\"orderCycle\">\n                    <Icon type=\"md-swap\" />\n                    <div>顺序</div>\n                </div>\n                <div class=\"login\">\n                    <span v-if=\"!isLogin\" @click=\"loginModal = true\">\n                        <Icon type=\"md-log-in\" />\n                        <div>登录</div>\n                    </span>\n                    <span v-if=\"isLogin\" @click=\"logout\">\n                        <Icon type=\"md-log-out\" />\n                        <div>下机</div>\n                    </span>\n                </div>\n            </div>\n        </div>\n\n        <Modal v-model=\"loginModal\" width=\"450\">\n            <p slot=\"header\" style=\"color:#f60;text-align:center\">\n                <Icon type=\"logo-pinterest\" />\n                <span> 请登录</span>\n            </p>\n            <div v-if=\"loginModal\">\n                <div class=\"ranklistbox\" style=\"width:100%;padding:0px 2px;\">\n                    <el-form :model=\"ruleForm\" status-icon :rules=\"rules\" ref=\"ruleForm\" label-width=\"55px\">\n                        <el-form-item label=\"账号:\" prop=\"account\" >\n                            <el-input type=\"account\" v-model=\"ruleForm.account\"></el-input>\n                        </el-form-item>\n                        <el-form-item label=\"密码:\" prop=\"password\">\n                            <el-input type=\"password\" @keypress.enter.native=\"submit('ruleForm')\" v-model=\"ruleForm.password\"></el-input>\n                        </el-form-item>\n                    </el-form>\n                </div>\n            </div>\n            <div slot=\"footer\" v-if=\"loginModal\">\n                <Row>\n                    <Button type=\"success\" long @click=\"submit('ruleForm')\">登录</Button>\n                </Row>\n            </div>\n        </Modal>\n\n        <audio autoplay id=\"musicPlayer\" ref=\"musicPlayer\" @ended=\"end\" :src=\"'http://localhost:8633/api/music/nowmusic?id=' + currentSong._id\" preload=\"auto\"></audio>\n    </div>\n</template>\n<script>\nimport nextSong from \"@/config/nextSong\"\nimport prevSong from \"@/config/prevSong\"\nimport hasLogin from '@/config/isLogin'\nimport jwt_decode from \"jwt-decode\"\nimport wsmLoading from \"@/plugins/wsmLoading\"\nexport default {\n    name:\"bottomNav\",\n    data(){\n        return{\n            loginModal:false,\n            ruleForm:{\n                account:\"\",\n                password:\"\"\n            },\n            rules:{\n                account:[\n                    {required:true, message:\"账号不能为空\", trigger:\"change\"}\n                ],\n                password:[\n                    {required:true, message:\"密码不能为空\", trigger:\"change\"}\n                ]\n            },\n        }\n    },\n    mounted(){\n        setTimeout(() => {\n            this.currentSong = JSON.parse(localStorage.currentSong)[0] ? JSON.parse(localStorage.currentSong)[0] : {_id:0};\n            if(localStorage.play == \"0\"){\n                this.$refs.musicPlayer.pause();\n                $(\"#ios-play\").fadeIn();\n                $(\"#ios-pause\").fadeOut();\n                \n            }else{\n                $(\"#ios-play\").fadeOut();\n                $(\"#ios-pause\").fadeIn();\n                this.$refs.musicPlayer.play();\n            }\n        }, 200)\n    },\n    created(){\n        // this.currentSong = JSON.parse(localStorage.currentSong)[0] ? JSON.parse(localStorage.currentSong)[0] : {_id:0};\n    },\n    methods:{\n        end(){\n            if(localStorage.playModle == 1){\n                const song = nextSong();\n                this.$refs.musicPlayer.src = \"http://localhost:8633/api/music/nowmusic?id=\" + song._id\n                const obj = [song];\n                localStorage.setItem(\"currentSong\", JSON.stringify(obj))\n                this.currentSong = song;\n            }else{\n                this.$refs.musicPlayer.play();\n            }\n        },\n        // 播放上一首\n        playPrev(){\n            if(hasLogin()){\n                if(localStorage.play == \"0\"){\n                    if(this.$refs.musicPlayer.src.split(\"?\")[1] == \"id=0\"){\n                        this.$confirm(\"请先添加歌曲\", \"提示\", {\n                            confirmButtonText:\"确定\",\n                            cancelButtonText:\"取消\",\n                            type:\"warning\"\n                        }).then(() => {}).catch(() => {})\n                        \n                    }else{\n                        const song = prevSong();\n                        this.$refs.musicPlayer.src = \"http://localhost:8633/api/music/nowmusic?id=\" + song._id\n                        const obj = [song];\n                        localStorage.setItem(\"currentSong\", JSON.stringify(obj))\n                        this.currentSong = song;\n                        setTimeout(() => {\n                            $(\"#ios-play\").fadeIn();\n                            $(\"#ios-pause\").fadeOut();\n                            this.$refs.musicPlayer.pause();\n                        }, 10)\n                    }\n                }else{\n                    if(this.$refs.musicPlayer.src.split(\"?\")[1] == \"id=0\"){\n                        this.$confirm(\"请先添加歌曲\", \"提示\", {\n                            confirmButtonText:\"确定\",\n                            cancelButtonText:\"取消\",\n                            type:\"warning\"\n                        }).then(() => {}).catch(() => {})\n                        \n                    }else{\n                        const song = prevSong();\n                        this.$refs.musicPlayer.src = \"http://localhost:8633/api/music/nowmusic?id=\" + song._id\n                        const obj = [song];\n                        localStorage.setItem(\"currentSong\", JSON.stringify(obj))\n                        this.currentSong = song;\n                        setTimeout(() => {\n                            $(\"#ios-play\").fadeOut();\n                            $(\"#ios-pause\").fadeIn();\n                            this.$refs.musicPlayer.play();\n                        }, 10)\n                    }\n                }\n            }else{\n                this.loginModal = true;\n            }\n        },\n        // 播放或暂停\n        playOrpause(){\n            if(hasLogin()){\n                if(this.$refs.musicPlayer.src.split(\"?\")[1] == \"id=0\"){\n                    this.$confirm(\"请先添加歌曲\", \"提示\", {\n                        confirmButtonText:\"确定\",\n                        cancelButtonText:\"取消\",\n                        type:\"warning\"\n                    }).then(() => {}).catch(() => {})\n                }else if(this.$store.getters.songList.length == 1){\n                    console.log(111)\n                    const song = nextSong();\n                    this.$refs.musicPlayer.src = \"http://localhost:8633/api/music/nowmusic?id=\" + song._id\n                    const obj = [song];\n                    localStorage.setItem(\"currentSong\", JSON.stringify(obj))\n                    this.currentSong = song;\n                    if(localStorage.play == \"0\"){\n                        this.$refs.musicPlayer.play();\n                        $(\"#ios-play\").fadeOut();\n                        $(\"#ios-pause\").fadeIn();\n                        localStorage.play = 1;\n                    }else{\n                        this.$refs.musicPlayer.pause();\n                        $(\"#ios-play\").fadeIn();\n                        $(\"#ios-pause\").fadeOut();\n                        localStorage.play = 0;\n                    }\n                }else{\n                    if(this.$refs.musicPlayer.paused){\n                        this.$refs.musicPlayer.play();\n                        $(\"#ios-play\").fadeOut();\n                        $(\"#ios-pause\").fadeIn();\n                        localStorage.play = 1;\n                    }else{\n                        this.$refs.musicPlayer.pause();\n                        $(\"#ios-play\").fadeIn();\n                        $(\"#ios-pause\").fadeOut();\n                        localStorage.play = 0;\n                    }\n                }\n            }else{\n                this.loginModal = true;\n            }\n        },\n        // 播放下一首\n        playNext(){\n            if(hasLogin()){\n                if(localStorage.play == '0'){\n                    console.log(11)\n                    if(this.$refs.musicPlayer.src.split(\"?\")[1] == \"id=0\"){\n                        this.$confirm(\"请先添加歌曲\", \"提示\", {\n                            confirmButtonText:\"确定\",\n                            cancelButtonText:\"取消\",\n                            type:\"warning\"\n                        }).then(() => {}).catch(() => {})\n                        \n                    }else{\n                        const song = nextSong();\n                        this.$refs.musicPlayer.src = \"http://localhost:8633/api/music/nowmusic?id=\" + song._id\n                        const obj = [song];\n                        localStorage.setItem(\"currentSong\", JSON.stringify(obj))\n                        this.currentSong = song;\n                        \n                        setTimeout(() => {\n                            $(\"#ios-play\").fadeIn();\n                            $(\"#ios-pause\").fadeOut();\n                            this.$refs.musicPlayer.pause();\n                        }, 10)\n                    }\n                }else{\n                    if(this.$refs.musicPlayer.src.split(\"?\")[1] == \"id=0\"){\n                        this.$confirm(\"请先添加歌曲\", \"提示\", {\n                            confirmButtonText:\"确定\",\n                            cancelButtonText:\"取消\",\n                            type:\"warning\"\n                        }).then(() => {}).catch(() => {})\n                        \n                    }else{\n                        const song = nextSong();\n                        this.$refs.musicPlayer.src = \"http://localhost:8633/api/music/nowmusic?id=\" + song._id\n                        const obj = [song];\n                        localStorage.setItem(\"currentSong\", JSON.stringify(obj))\n                        this.currentSong = song;\n                        \n                        setTimeout(() => {\n                            $(\"#ios-play\").fadeOut();\n                            $(\"#ios-pause\").fadeIn();\n                            this.$refs.musicPlayer.play();\n                        }, 10)\n                    }\n                }\n            }else{\n                this.loginModal = true;\n            }\n        },\n        // 顺序播放\n        orderCycle(){\n            if(hasLogin()){\n                $(\".order-cycle\").css(\"color\",\"rgb(196, 196, 26)\");\n                $(\".single-cycle\").css(\"color\",\"rgb(219, 217, 217)\");\n                this.$store.setPlayModle = 1;\n                nextSong();\n                localStorage.setItem(\"playModle\", 1);\n            }else{\n                this.loginModal = true;\n            }\n        },\n        // 单曲循环\n        singleCycle(){\n            if(hasLogin()){\n                $(\".single-cycle\").css(\"color\",\"rgb(196, 196, 26)\");\n                $(\".order-cycle\").css(\"color\",\"rgb(219, 217, 217)\");\n                this.$store.setPlayModle = -1;\n                nextSong();\n                localStorage.setItem(\"playModle\", -1);\n            }else{\n                this.loginModal = true;\n            }\n        },\n        // 静音或最大\n        minOrmax(){\n            if(hasLogin()){\n                if(this.$refs.musicPlayer.volume == 0){\n                    this.$refs.musicPlayer.volume = 1;\n                    $(\".minormax\").css(\"color\",\"rgb(219, 217, 217)\")\n                }else{\n                    this.$refs.musicPlayer.volume = 0\n                    $(\".minormax\").css(\"color\",\"rgb(196, 196, 26)\")\n                }\n            }else{\n                this.loginModal = true;\n            }\n        },\n        // 减小音量\n        reducevolume(){\n            if(hasLogin()){\n                $(\".minormax\").css(\"color\",\"rgb(219, 217, 217)\")\n                if(this.$refs.musicPlayer.volume > 0.05){\n                    this.$refs.musicPlayer.volume -= 0.05;\n                }else{\n                    this.$refs.musicPlayer.volume = 0;\n                }\n            }else{\n                this.loginModal = true;\n            }\n        },\n        // 增加音量\n        addvolume(){\n            if(hasLogin()){\n                $(\".minormax\").css(\"color\",\"rgb(219, 217, 217)\")\n                if(this.$refs.musicPlayer.volume < 0.95){\n                    this.$refs.musicPlayer.volume += 0.05;\n                }else{\n                    this.$refs.musicPlayer.volume = 1;\n                }\n            }else{\n                this.loginModal = true;\n            }\n        },\n        // 回首页\n        goHome(){\n            this.$route.path == \"/home/index\" ? console.log(\"不能前进了\") : this.$router.push(\"/\")\n        },\n        // 去已选界面\n        selected(){\n            if(hasLogin()){\n                this.$router.push(\"/home/selected\");\n            }else{\n                this.loginModal = true;\n            }\n        },\n        // 登录\n        submit(formName){\n            this.$refs[formName].validate(valid => {\n                if(valid){\n                    wsmLoading.start();\n                    this.loginModal = false;\n                    setTimeout(() => {\n                        this.$axios.post(\"http://localhost:8633/api/user/login\", this.ruleForm)\n                            .then(res => {\n                                this.$nextTick(() => {\n                                    console.log(res);\n                                    this.$Message.success(res.data.result);\n                                    localStorage.setItem(\"userToken\", res.data.token);\n                                    const decoded = jwt_decode(res.data.token);\n                                    this.$store.dispatch(\"setAuthorizated\", true);\n                                    this.$store.dispatch(\"setUser\", decoded);\n                                    wsmLoading.end();\n                                    this.ruleForm.account = \"\";\n                                    this.ruleForm.password = \"\";\n                                })\n                            }).catch(err => {\n                                this.loginModal = true;\n                                console.error(err.response)\n                            })\n                    }, 300)\n                }else{\n                    console.log(111)\n                }\n            })\n        },\n        // 下机\n        logout(){\n            this.$confirm(\"你确定要提前下机吗\", \"提示\", {\n                confirmButtonText:\"确定\",\n                cancleButtonText:\"取消\",\n                type:\"warning\"\n            }).then(() => {\n                wsmLoading.start(\"正在处理...\");\n                setTimeout(() => {\n                    this.$nextTick(() => {\n                        this.$store.dispatch(\"clearState\");\n                        this.$store.dispatch(\"setCurrentSong\", {id:0});\n                        this.$store.dispatch(\"songList\", []);\n                        this.$store.dispatch(\"playModle\", 1);\n                        this.$route.path == \"/home/index\" ? null : this.$router.push(\"/home/index\")\n                        this.$router.go(0);\n                        wsmLoading.end();\n                    })\n                }, 1000)\n            }).catch(() => {})\n        }\n    },\n    computed:{\n        isLogin(){\n            return this.$store.getters.isAuthorizated;\n        },\n        currentPoster(){\n            if(this.$store.getters.currentSong.poster){\n                return \"http://localhost:8633/api/music/poster?img=\" + this.$store.getters.currentSong.poster;\n            }else{\n                return  require(\"../assets/image/default-song-bg.jpg\");\n            }\n        },\n        currentSong:{\n            get(){\n                if(this.$store.getters.songList.length == 1){\n                    console.log(\"一首歌\")\n                    \n                    if(localStorage.play == \"0\"){\n                        $(\"#ios-play\").fadeIn();\n                        $(\"#ios-pause\").fadeOut();\n                    }else{\n                        $(\"#ios-play\").fadeOut();\n                        $(\"#ios-pause\").fadeIn();\n                    }\n                }else{\n                    if(localStorage.play == \"0\"){\n                        setTimeout(() => {\n                            document.getElementById(\"musicPlayer\").pause();\n                        }, 10)\n                        $(\"#ios-play\").fadeIn();\n                        $(\"#ios-pause\").fadeOut();\n                    }else{\n                        setTimeout(() => {\n                            document.getElementById(\"musicPlayer\").play();\n                        }, 10)\n                        $(\"#ios-play\").fadeOut();\n                        $(\"#ios-pause\").fadeIn();\n                    }\n                }\n                this.nextSong = nextSong();\n                return this.$store.getters.currentSong;\n            },\n            set(val){\n                this.$store.dispatch(\"setCurrentSong\", val);\n            }\n        }\n    }\n}\n</script>\n<style lang=\"less\" scoped>\n.topNav{\n    width: 100%;\n    height: 100%;\n    display: flex;\n    align-items: center;\n    justify-content: center;\n    perspective:1200px;\n\n    .container{\n        width: 80%;\n        height: 100%;\n        border-top-right-radius: 20px;\n        border-top-left-radius: 20px;\n        padding: 0px 40px;\n        background-image: linear-gradient(141deg,rgb(173, 38, 38) 0%,rgb(204, 30, 30) 75%);\n        transform: rotateX(30deg);\n        perspective:1200px;\n        z-index: 2;\n    }\n    .inner-box{\n        height: 90%;\n        width: 75%;\n        position: absolute;\n        z-index: 4;\n        background-color: transparent;\n        display: flex;\n\n        .left{\n            flex: 1;\n            height: 100%;\n            width: 100%;\n            display: flex;\n\n            .home,.selected,.addvolume,.reducevolume{\n                height: 100%;\n                flex: 1;\n                font-size: 50px;\n                text-align: center;\n                color: rgb(196, 196, 26);\n                div{\n                    font-size: 20px;\n                }\n                cursor: pointer;\n            }\n\n            .selected,.selected,.addvolume,.reducevolume{\n                color: rgb(219, 217, 217);\n                &:hover{\n                    color: rgb(196, 196, 26);\n                }\n            }\n        }\n        .middle{\n            flex: 1;\n            height: 100%;\n            width: 100%;\n            display: flex;\n            padding: 3px 50px;\n            align-items: center;\n            justify-content: center;\n            position: relative;\n            img{\n                width: 100%;\n                height: 100%;\n                border-radius: 5px;\n                filter: blur(1px);\n                z-index: 2;\n            }\n            &:hover{\n                .control-btn{\n                    display: flex;\n                }\n            }\n\n            .control-btn{\n                position: absolute;\n                width: 78%;\n                height: 100%;\n                z-index: 20;\n                background-color: rgba(0, 0, 0, .3);\n                display: none;\n\n                .prev-btn, .play, .next-btn{\n                    flex: 1;\n                    text-align: center;\n                    line-height: 110px;\n                    font-size: 60px;\n                    color: rgb(220, 225, 228);\n                    cursor: pointer;\n\n                    &:hover{\n                        transform: scale(1.02);\n                        color: rgb(120, 129, 138);\n                    }\n                }\n                .prev-btn{\n                    text-align: left;\n                    padding-left: 10px;\n                }\n                .next-btn{\n                    text-align: right;\n                    padding-right: 10px;\n                }\n            }\n        }\n        .right{\n            flex: 1;\n            height: 100%;\n            width: 100%;\n            display: flex;\n\n            .minormax,.single-cycle, .order-cycle, .login{\n                height: 100%;\n                flex: 1;\n                font-size: 50px;\n                text-align: center;\n                color: rgb(35, 14, 153);\n                div{\n                    font-size: 20px;\n                }\n                cursor: pointer;\n            }\n            .single-cycle, .order-cycle, .minormax{\n                color: rgb(221, 222, 223);\n                &:hover{\n                    color: rgb(196, 196, 26);\n                }\n            }\n        }\n\n    }\n}\n</style>\n"],"sourceRoot":"src/components"}]}